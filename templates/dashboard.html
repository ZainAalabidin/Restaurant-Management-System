{% extends 'base.html' %}
{% block content %}
<h1>Admin Dashboard</h1>

<li><a href="{{ url_for('order.orders') }}" type="button btn-primary">Manage Order</a></li>
<li><a href="#menu">Manage Menu</a></li>
<li><a href="#categories">Manage Categories</a></li>
<br>
<!-- Manage Orders Section -->
<section id="orders">
  
</section>

<!-- Menu Items Section -->
<section id="menu">
  <h2>Manage Menu</h2>
  <div class="add-new-item text-left">
    <a href="{{ url_for('menu.new_menu_item') }}" class="btn btn-primary">Add New Item</a>
    <div class="category-filter">
      <form method="GET" action="{{ url_for('menu.menu') }}">
        <div>Filter by Category</div>
        <select class="form-select" name="category_id" id="category" onchange="this.form.submit()">
          <option value="">All Categories</option>
          {% for category in categories %}
          <option value="{{ category.id }}" {% if category.id==selected_category_id %}selected{% endif %}>
            {{ category.name }}</option>
          {% endfor %}
        </select>
      </form>
    </div>
    <div class="menu-items">
      {% for item in menu_items %}
      <div class="menu-item-row">
        <img src="{{ url_for('static', filename='images/' + item.image) }}" alt="{{ item.name }}">
        <div class="menu-item-details">
          <h5>{{ item.name }}</h5>
          <p>{{ item.description }}</p>
          <p>${{ item.price }}</p>
          <p>Category: {{ item.category }}</p>
        </div>
        <div class="menu-item-actions">
          <form action="{{ url_for('menu.update_menu_item', item_id=item.id) }}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-primary btn-sm">Update</button>
          </form>
          <form id="del" action="{{ url_for('menu.delete_menu_item', item_id=item.id) }}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this item?');">Delete</button>
          </form>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>



<!-- Manage Categories Section -->
<section id="categories">
  <h2>Manage Categories</h2>
  <a href="{{ url_for('category.add_category') }}" class="btn btn-primary">Add New Category</a>
  <br>
  <br>
  <div class="categories">
    <ul class="list-group">
      {% for category in categories %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ category.name }}
        <form action="{{ url_for('category.delete_category', category_id=category.id) }}" method="POST"
          style="display:inline;">
          <button type="submit" class="btn btn-danger btn-sm"
            onclick="return confirm('Are you sure you want to delete this category? All associated menu items will also be deleted.');">Delete</button>
        </form>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>

{% endblock %}